<form [formGroup]="clientForm" (ngSubmit)="onSubmitClient()">
  <p-splitter layout="vertical">
    <ng-template pTemplate>
      <p-splitter layout="horizontal">
        <ng-template pTemplate>
          <div class="col grid align-items-center row-gap-2 p-3">
            <header class="font-bold">Dane osobowe:</header>

            <p-inputGroup>
              <p-inputGroupAddon>
                <i class="pi pi-user" pTooltip="Imię"></i>
              </p-inputGroupAddon>

              <input
                pInputText
                placeholder="Imię"
                formControlName="name"
                [pTooltip]="getError('name')"
                tooltipPosition="bottom"
                [readOnly]="editMode"
              />
            </p-inputGroup>

            <p-inputGroup>
              <p-inputGroupAddon>
                <i class="pi pi-users"></i>
              </p-inputGroupAddon>
              <input
                pInputText
                placeholder="Nazwisko"
                formControlName="surname"
                [pTooltip]="getError('surname')"
                tooltipPosition="bottom"
                [readOnly]="editMode"
              />
            </p-inputGroup>

            <p-inputGroup>
              <p-inputGroupAddon>
                <i class="pi pi-id-card"></i>
              </p-inputGroupAddon>
              <input
                pInputText
                placeholder="Numer PESEL"
                formControlName="personalNumber"
                [pTooltip]="getError('personalNumber')"
                tooltipPosition="bottom"
                [readOnly]="editMode"

              />
            </p-inputGroup>
          </div>
        </ng-template>

        <ng-template pTemplate>
          <div
            class="col flex-column align-items-center justify-content-center"
          >
            <div>
              <header class="font-bold">Dane kontaktowe:</header>
            </div>

            <div class="mt-2">
              <p-inputGroup>
                <p-inputGroupAddon>
                  <i class="pi pi-phone"></i>
                </p-inputGroupAddon>
                <input
                  pInputText
                  placeholder="Numer telefonu"
                  formControlName="phoneNumber"
                  [pTooltip]="getError('phoneNumber')"
                  tooltipPosition="bottom"
                />
              </p-inputGroup>
            </div>

            <div class="mt-2">
              <p-inputGroup>
                <p-inputGroupAddon>
                  <i class="pi pi-at"></i>
                </p-inputGroupAddon>
                <input
                  pInputText
                  placeholder="Adres email (opcjonalnie)"
                  formControlName="emailAddress"
                  [pTooltip]="getError('emailAddress')"
                  tooltipPosition="bottom"
                />
              </p-inputGroup>
            </div>
          </div>
        </ng-template>
      </p-splitter>
    </ng-template>

    <ng-template pTemplate>
      <p-accordion
        class="col-12"
        expandIcon="pi pi-plus"
        collapseIcon="pi pi-minus"
        (onOpen)="setAddressValidators()"
        (onClose)="setAddressValidators()"
      >
        <p-accordionTab header="Dane adresowe (opcjonalne, gdy zwinięte)">
          <div class="flex flex-row">
            <p-inputGroupAddon>
              <i class="pi pi-globe"></i>
            </p-inputGroupAddon>

            <p-dropdown
              [options]="countries"
              formControlName="country"
              placeholder="Kraj"
              [editable]="true"
              optionLabel="name"
              class="w-2 mr-2"
              appendTo="body"
              [pTooltip]="tooltips['country']"
              tooltipPosition="bottom"
            />

            <p-inputGroupAddon>
              <i class="pi pi-building"></i>
            </p-inputGroupAddon>
            <input
              pInputText
              placeholder="Miejscowość"
              formControlName="city"
              class="mr-3"
              [pTooltip]="tooltips['city']"
              tooltipPosition="bottom"
            />

            <p-inputGroupAddon>
              <i class="pi pi-map-marker"></i>
            </p-inputGroupAddon>
            <input
              pInputText
              placeholder="Ulica"
              formControlName="street"
              class="mr-3"
              [pTooltip]="tooltips['street']"
              tooltipPosition="bottom"
            />

            <p-inputGroupAddon>
              <i class="pi pi-envelope"></i>
            </p-inputGroupAddon>
            <p-inputMask
              mask="99-999"
              placeholder="Kod pocztowy"
              formControlName="postalCode"
              class="mr-3"
              [pTooltip]="tooltips['postalCode']"
              tooltipPosition="bottom">
            </p-inputMask>

          </div>
        </p-accordionTab>
      </p-accordion>
    </ng-template>
  </p-splitter>

  <button
    pButton
    type="submit"
    label="Dodaj Klienta"
  ></button>
  <i
    *ngIf="clientForm.invalid"
    style="color: rgb(184, 26, 26)"
    class="pi pi-exclamation-circle ml-1"
    pTooltip="Uzupełnij brakujące pola"
  ></i>
</form>
